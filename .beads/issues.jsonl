{"id":"tr-93x","title":"Test failures: TranslationResult and TranslationOutput components","description":"## Summary\n7 tests are failing in 3 test files related to translation output components.\n\n## Failing Tests\n\n### 1. `src/components/TranslationResult.test.tsx`\n- **TranslationResult \u003e renders the saved translation icon** - Unable to find element with accessible name \"Translation saved\"\n\n### 2. `src/components/TranslationOutput.test.tsx` (5 failures)\n- **TranslationOutput \u003e displays translations when provided** - Expected \"hola\" text to be present but it wasn't found\n- **TranslationOutput \u003e shows audio button for translations** - Unable to find element with accessible name matching /Play audio for/\n- **TranslationOutput \u003e shows no audio button when audio playback is disabled** - Unable to find element with accessible name matching /Play audio for/\n- **TranslationOutput \u003e does not show translate button when aiPromptRunner is null** - Unable to find element with role \"tab\"\n- **TranslationOutput \u003e shows the audio button for a specific phrase** - Unable to find element with accessible name matching /Play audio for/\n\n### 3. `src/App.test.tsx`\n- **App \u003e shows saved indicator when translation is saved** - Expected \"Save translation\" text to be present but found \"Unsave translation\" instead\n\n## Root Cause Analysis\nThe test failures suggest a mismatch between the expected component structure/text in tests vs actual implementation:\n1. Translation saved/unsaved icon accessibility labels may have changed\n2. TranslationOutput component structure may have changed - tests expect certain elements that are not present\n3. Audio button accessibility names may have changed\n\n## Recommended Fix\nReview and update the failing tests to match the current component implementations, or fix the components if the current behavior is unintended.","status":"tombstone","priority":1,"issue_type":"bug","owner":"herb@devresults.com","created_at":"2026-01-18T14:55:30.765442+01:00","created_by":"Herb Caudill","updated_at":"2026-01-18T15:02:20.895342+01:00","deleted_at":"2026-01-18T15:02:20.895342+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"bug"}
{"id":"tr-9cw","title":"Test failures in TranslationResults.test.tsx","description":"## Summary\nThere are 7 failing tests in the test suite related to `TranslationResults.test.tsx`.\n\n## Root Cause\nThe tests expect the source language tab (e.g., \"English\") to be rendered and disabled in the tab list, but the component currently filters out the source language entirely from the displayed tabs:\n\n```tsx\n// TranslationResults.tsx line 31\nconst selectableLanguages = languages.filter(l =\u003e l.code !== sourceLanguage)\n```\n\n## Failing Tests\n1. **renders all language tabs including source language** - Expects English tab to exist, but it's filtered out\n2. **disables source language tab** - Expects English tab to be disabled, but it doesn't exist  \n3. **shows selected tab content** - Fails because tab state assertions don't work as expected\n4. **calls onTabChange when clicking different tab** - Fails due to tab structure mismatch\n5. **applies mono font to translation text** - Fails because text isn't found\n6. **uses flex layout to fill available vertical space for swipe target** - Fails due to DOM structure mismatch\n7. **renders three skeleton option placeholders when loading** - Expects 6 skeletons but component renders differently\n\n## Decision Needed\nEither:\n1. **Update the tests** to match the current component behavior (source language tab is not shown)\n2. **Update the component** to show the source language tab but keep it disabled (as the tests expect)\n\n## Test Output\n```\n✗ src/components/TranslationResults.test.tsx \u003e TranslationResults \u003e renders all language tabs including source language\n✗ src/components/TranslationResults.test.tsx \u003e TranslationResults \u003e disables source language tab\n✗ src/components/TranslationResults.test.tsx \u003e TranslationResults \u003e shows selected tab content\n✗ src/components/TranslationResults.test.tsx \u003e TranslationResults \u003e calls onTabChange when clicking different tab\n✗ src/components/TranslationResults.test.tsx \u003e TranslationResults \u003e applies mono font to translation text\n✗ src/components/TranslationResults.test.tsx \u003e TranslationResults \u003e uses flex layout to fill available vertical space for swipe target\n✗ src/components/TranslationResults.test.tsx \u003e TranslationResults \u003e renders three skeleton option placeholders when loading\n```","status":"in_progress","priority":1,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-18T15:12:27.358386+01:00","created_by":"Herb Caudill","updated_at":"2026-01-18T15:12:31.804071+01:00"}
{"id":"tr-t86","title":"Test failures in TranslationPanel, TranslateInput, and App tests","description":"## Test Failures Summary\n\nThere are 7 failing tests across 3 test files:\n\n### 1. src/components/TranslationPanel.test.tsx (3 failures)\n\n**Test: \"shows definition and pronunciation when translation is selected and showDetails is true\"**\n- Expected: `/hello/` (phonetic pronunciation)\n- Received: Element not found\n- The test expects a pronunciation element to be visible when showDetails is true, but it's not rendered\n\n**Test: \"clicking a translation should update the value in the input\"** \n- Expected: Input value to be \"hola\" after clicking translation\n- Received: Input value is still \"hello\"\n- The click handler is not properly updating the input value\n\n**Test: \"clicking search button for selected translation calls onSearch\"**\n- Expected: onSearch to be called once\n- Received: Not called\n- The search button click handler is not working\n\n### 2. src/components/TranslateInput.test.tsx (2 failures)\n\n**Test: \"shows clear button when value is non-empty and not loading\"**\n- Expected: Clear button to be visible\n- Received: Button not found with name \"Clear input\"\n- The clear button is not being rendered when it should be\n\n**Test: \"calls onClear when clear button is clicked\"**\n- Expected: onClear to be called when clear button is clicked  \n- Received: Button not found\n- Same issue - clear button not rendered\n\n### 3. src/App.test.tsx (2 failures)\n\n**Test: \"displays translation results for all languages\"**\n- Expected: \"hola\" to be visible in results\n- Received: Only language tabs shown, no translation content\n- The translation results are not being rendered properly\n\n**Test: \"maintains previous translations while loading new ones\"**\n- Expected: \"hola\" to be visible during loading\n- Received: Only shows tabs, no content\n- Same rendering issue with translation results\n\n## Root Causes to Investigate\n\n1. TranslateInput clear button rendering logic\n2. TranslationPanel click handlers and showDetails conditional rendering\n3. App component translation results display","status":"tombstone","priority":1,"issue_type":"task","owner":"herb@devresults.com","created_at":"2026-01-18T14:49:06.662215+01:00","created_by":"Herb Caudill","updated_at":"2026-01-18T15:11:39.429378+01:00","deleted_at":"2026-01-18T15:11:39.429378+01:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"tr-vyo","title":"The 'Translated from...' div should have no rounding or margin-top, so it should abut the dark blue header. and it should extend across the screen's width. and the text should be black except for the button which should be gray. the name of the language should be bold, not italic","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-18T14:50:46.340723+01:00","updated_at":"2026-01-18T14:50:46.340723+01:00"}
